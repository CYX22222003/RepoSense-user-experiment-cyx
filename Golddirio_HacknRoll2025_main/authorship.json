[{"path":".gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"CYX22222003"},"content":"__pycache__/","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"CYX22222003"},"content":".vscode/","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"CYX22222003"},"content":".env","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"CYX22222003"},"content":".venv","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"CYX22222003"},"content":"env/","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"CYX22222003"},"content":"venv","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"CYX22222003"},"content":"*_test.py","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"CYX22222003"},"content":"test.db","isFullCredit":false}],"authorContributionMap":{"CYX22222003":8}},{"path":"README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"Golddirio"},"content":"# HacknRoll2025","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"CYX22222003"},"content":"The product built for Hack\u0026amp;Roll 2025.","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"CYX22222003"},"content":"üíò Cupid Arrow - Love at Your Fingertips! üíò","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"CYX22222003"},"content":"Looking for a spark? Cupid Arrow on Telegram brings love and connection closer than ever. With instant matching, private chats, and a fun, user-friendly experience, finding your special someone has never been easier. Join the Cupid community today and let love strike where you least expect it! üí¨‚ù§Ô∏è","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"CYX22222003"},"content":"### Inspiration","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"Golddirio"},"content":"Looking for a spark? Cupid Arrow is the ultimate Telegram bot designed to bring love and connection closer than ever. With its smart matching algorithm, Cupid Arrow scours its database to find the top 3 best matches for you. Enjoy private, seamless chats and a fun, user-friendly experience that makes meeting someone special effortless.üíò ","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"CYX22222003"},"content":"Just a few taps away: share your preferences, let the bot work its magic, and connect with like-minded individuals instantly.","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"CYX22222003"},"content":"Join the Cupid community today, where Cupid Arrow helps you find the perfect match in no time. Let love strike where you least expect it! üí¨‚ù§Ô∏è","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"CYX22222003"},"content":"   ","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"CYX22222003"},"content":"### What it does","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"CYX22222003"},"content":"Cupid Arrow Telegram bot facilitates seamless matchmaking by performing the following actions:","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"CYX22222003"},"content":"User Initialization: When the user initiates the bot with /start, the bot welcomes them and creates a user profile in its database.","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"Golddirio"},"content":"Matching Requests: Users can request matches based on their preferences. Before taking the quiz, the user can input hhis gender and age. If the user hasn\u0027t taken the quiz or if the quiz is outdated, the bot redirects them to take the quiz. Otherwise, it runs its matching algorithm to identify and return the top 3 most compatible matches.","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"Golddirio"},"content":"User Quiz: The bot gathers detailed user preferences by prompting a series of 8 quiz questions. User responses update their profile in real-time to enhance matchmaking accuracy.","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"CYX22222003"},"content":"Account Removal: Users can request to delete their account, and the bot ensures all associated data is removed from its database.","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"CYX22222003"},"content":"In summary, Cupid Arrow efficiently connects users by maintaining updated profiles, matching them with the best-suited individuals, and providing full control over their data.","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"CYX22222003"},"content":"### How we built it","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"CYX22222003"},"content":"**Telegram Interaction**: Managed using `python-telegram-bot` API for smooth communication between the bot and users.","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"CYX22222003"},"content":"   ","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"CYX22222003"},"content":"**Database**: User data is stored in a `sqlite` database for lightweight and efficient management.","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"CYX22222003"},"content":"**Data Processing**: numpy and scikit-learn are used to preprocess user data and enable effective matching.","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"CYX22222003"},"content":"**Dimensionality Reduction**: Principal Component Analysis (PCA) is applied to reduce the dimensionality of user data to two dimensions, simplifying and optimizing the matching process.  ","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"CYX22222003"},"content":"**Matching Algorithm Overview**:","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"CYX22222003"},"content":"Setup: Start with the user\u0027s feature vector v (an m-dimensional vector) and a set of feature vectors S. The goal is to find a subset S\u0027 ‚äÜ S of size k such that no vectors in S are closer to v than the vectors in S‚Ä≤.","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"CYX22222003"},"content":"Dimensionality Reduction: Apply PCA to project v and S into 3D space, improving computational efficiency.","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"CYX22222003"},"content":"Quick Selection: Use the quick select algorithm to find the k-th closest vector efficiently.","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"CYX22222003"},"content":"### Accomplishments that we\u0027re proud of","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"CYX22222003"},"content":"Advanced Matching Algorithm:   ","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"CYX22222003"},"content":"Successfully implemented a robust matchmaking algorithm that utilizes PCA for dimensionality reduction and quick select for efficient and accurate user matching.","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"CYX22222003"},"content":"Streamlined User Experience:  ","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"CYX22222003"},"content":"Designed an intuitive, user-friendly interface using the python-telegram-bot API, ensuring seamless interactions between users and the bot.  ","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"CYX22222003"},"content":"Efficient Data Handling:  ","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"CYX22222003"},"content":"Integrated a lightweight SQLite database for efficient storage and management of user data, allowing fast retrieval and processing during matches.  ","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"CYX22222003"},"content":"Data-Driven Insights:  ","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"CYX22222003"},"content":"Leveraged cutting-edge tools like numpy and scikit-learn to preprocess user data and ensure high accuracy in match recommendations.  ","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"CYX22222003"},"content":"Scalability and Optimization:  ","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"CYX22222003"},"content":"Utilized Principal Component Analysis (PCA) to optimize the computational performance of the matchmaking algorithm, reducing complexity and improving scalability.","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"CYX22222003"},"content":"Comprehensive Privacy Controls:   ","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"CYX22222003"},"content":"Empowered users with control over their data by implementing an account deletion feature that ensures secure removal of user information from the database.","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"CYX22222003"},"content":"### Challenges we ran into","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"CYX22222003"},"content":"Exploring the Correct Algorithm for Matching:   ","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"CYX22222003"},"content":"Finding an efficient and accurate matching algorithm was a key challenge. While k-d trees were considered, their computational expense for constructing new trees led us to utilize the quick select algorithm.","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"CYX22222003"},"content":"   ","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"CYX22222003"},"content":"Learning Telegram API:  ","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"CYX22222003"},"content":"Understanding the python-telegram-bot API to handle user interactions, bot commands, and error scenarios was a learning curve. Integrating the bot\u0027s logic with real-time user inputs demanded a thorough understanding of the API\u0027s capabilities and limitations.  ","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"CYX22222003"},"content":"   ","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"CYX22222003"},"content":"Sorting with Quick Select:  ","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"CYX22222003"},"content":"Adapting the quick select algorithm for sorting user data based on proximity in reduced dimensions was challenging. Implementing it efficiently while maintaining accuracy and managing edge cases required meticulous attention to algorithm design and debugging.  ","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"CYX22222003"},"content":"Dimensionality Reduction with PCA:  ","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"CYX22222003"},"content":"Applying PCA to reduce the dimensions of user data was another hurdle. Ensuring that the reduced dimensions retained enough meaningful information for accurate matches involved careful tuning and validation.  ","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"CYX22222003"},"content":"  ","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"CYX22222003"},"content":"Data Management and Privacy:  ","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"CYX22222003"},"content":"Ensuring efficient data handling, from storing user profiles in SQLite to managing real-time updates, was critical. Additionally, implementing a robust account deletion mechanism to address privacy concerns required precision and care.  ","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"CYX22222003"},"content":"### What we learned","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"Golddirio"},"content":"Firstly, we gained valuable experience in building a Telegram bot using the Python-Telegram-Bot API for the first time. We explored the entire process of learning the new API and developed an understanding of how to create a seamless and intuitive Telegram user experience from scratch.","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"Golddirio"},"content":"Secondly, we had the opportunity to deepen our knowledge of relevant algorithms, such as QuickSelect. Additionally, we thoroughly examined the application of a combination of Principal Component Analysis (PCA) and Euclidean distance. This helped us become familiar with effective matching algorithms, particularly for scenarios involving high-dimensional metric spaces.","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"CYX22222003"},"content":"### Built With","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"CYX22222003"},"content":"anyio\u003d\u003d4.8.0","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"CYX22222003"},"content":"certifi\u003d\u003d2024.12.14","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"CYX22222003"},"content":"greenlet\u003d\u003d3.1.1","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"CYX22222003"},"content":"h11\u003d\u003d0.14.0","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"CYX22222003"},"content":"httpcore\u003d\u003d1.0.7","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"CYX22222003"},"content":"httpx\u003d\u003d0.28.1","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"CYX22222003"},"content":"idna\u003d\u003d3.10","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"CYX22222003"},"content":"joblib\u003d\u003d1.4.2","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"CYX22222003"},"content":"numpy\u003d\u003d2.2.1","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"CYX22222003"},"content":"python-dotenv\u003d\u003d1.0.1","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"CYX22222003"},"content":"python-telegram-bot\u003d\u003d21.10","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"CYX22222003"},"content":"scikit-learn\u003d\u003d1.6.1","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"CYX22222003"},"content":"scipy\u003d\u003d1.15.1","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"CYX22222003"},"content":"sniffio\u003d\u003d1.3.1","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"CYX22222003"},"content":"SQLAlchemy\u003d\u003d2.0.37","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"CYX22222003"},"content":"threadpoolctl\u003d\u003d3.5.0","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"CYX22222003"},"content":"typing_extensions\u003d\u003d4.12.2","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"CYX22222003"},"content":"### Try it out","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"Golddirio"},"content":"@CAGolddirio123_bot","isFullCredit":false}],"authorContributionMap":{"Golddirio":8,"CYX22222003":95}},{"path":"app/algorithm/Pair.py","fileType":"py","lines":[{"lineNumber":1,"author":{"gitId":"CYX22222003"},"content":"import numpy as np","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"CYX22222003"},"content":"class Pair():","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"CYX22222003"},"content":"    def __init__(self, index: int, xs: np.ndarray):","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"CYX22222003"},"content":"        self.index \u003d index","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"CYX22222003"},"content":"        self.xs \u003d xs","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"CYX22222003"},"content":"        ","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"CYX22222003"},"content":"    def __str__(self):","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"CYX22222003"},"content":"        return f\"[{self.index}, {self.xs}]\"","isFullCredit":false}],"authorContributionMap":{"CYX22222003":9}},{"path":"app/algorithm/utils.py","fileType":"py","lines":[{"lineNumber":1,"author":{"gitId":"CYX22222003"},"content":"import random","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"CYX22222003"},"content":"from typing import List, Tuple","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"CYX22222003"},"content":"from sklearn.decomposition import PCA","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"CYX22222003"},"content":"import numpy as np ","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"CYX22222003"},"content":"from app.algorithm.Pair import Pair","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"CYX22222003"},"content":"def swap_index(xs: List[any], i: int, j: int):","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"CYX22222003"},"content":"    temp \u003d xs[i]","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"CYX22222003"},"content":"    xs[i] \u003d xs[j]","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"CYX22222003"},"content":"    xs[j] \u003d temp","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"CYX22222003"},"content":"def compare_tuples(t1, t2):","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"CYX22222003"},"content":"    if t1[1] \u003c t2[1]:","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"CYX22222003"},"content":"        return -1","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"CYX22222003"},"content":"    elif t1[1] \u003e t2[1]:","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"CYX22222003"},"content":"        return 1","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"CYX22222003"},"content":"    else:","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"CYX22222003"},"content":"        return -1 if t1[0] \u003c t2[0] else 1","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"CYX22222003"},"content":"def perform_pca(pairs: List[Pair]):","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"CYX22222003"},"content":"    vectors \u003d list(map(lambda x : x.xs, pairs))","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"CYX22222003"},"content":"    original \u003d np.vstack(vectors)","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"CYX22222003"},"content":"    pca \u003d PCA(n_components\u003d3)","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"CYX22222003"},"content":"    reduced_data \u003d pca.fit_transform(original)","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"CYX22222003"},"content":"    out \u003d []","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"CYX22222003"},"content":"    for i in range(len(pairs)):","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"CYX22222003"},"content":"        index \u003d pairs[i].index","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"CYX22222003"},"content":"        new_xs \u003d reduced_data[i, :]","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"CYX22222003"},"content":"        out.append(Pair(index, new_xs))","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"CYX22222003"},"content":"    return out","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"CYX22222003"},"content":"def convert_distances(pairs: List[Pair]):","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"CYX22222003"},"content":"    target \u003d pairs[0]","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"CYX22222003"},"content":"    f \u003d lambda p : (p.index, np.linalg.norm(target.xs - p.xs))","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"CYX22222003"},"content":"    return list(map(f, pairs[1:]))","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"CYX22222003"},"content":"def quick_select(pairs: List[Tuple[int, float]], k):","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"CYX22222003"},"content":"    quick_select_helper(pairs, 0, len(pairs) - 1, k)","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"CYX22222003"},"content":"    return pairs[:k]","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"CYX22222003"},"content":"def quick_select_helper(xs: List[Tuple[int, float]], left, right, k):","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"CYX22222003"},"content":"    if left \u003c right: ","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"CYX22222003"},"content":"        pivot \u003d random.randint(left, right)","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"CYX22222003"},"content":"        swap_index(xs, pivot, left)","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"CYX22222003"},"content":"        index \u003d partition(xs, left, right)","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"CYX22222003"},"content":"        count \u003d index - left + 1 ","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"CYX22222003"},"content":"        if count \u003d\u003d k:","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"CYX22222003"},"content":"            return","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"CYX22222003"},"content":"        elif k \u003c count:","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"CYX22222003"},"content":"            return quick_select_helper(xs, left, index - 1, k)","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"CYX22222003"},"content":"        else:","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"CYX22222003"},"content":"            return quick_select_helper(xs, index + 1, right, k - count)","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"CYX22222003"},"content":"def partition(xs: List[Tuple[int, float]], left: int, right: int):","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"CYX22222003"},"content":"    p \u003d xs[left]","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"CYX22222003"},"content":"    i \u003d left + 1","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"CYX22222003"},"content":"    j \u003d right","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"CYX22222003"},"content":"    while True:","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"CYX22222003"},"content":"        while i \u003c\u003d right and compare_tuples(xs[i], p) \u003c 0:","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"CYX22222003"},"content":"            i +\u003d 1","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"CYX22222003"},"content":"        ","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"CYX22222003"},"content":"        while j \u003e left and compare_tuples(xs[j], p) \u003e 0:","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"CYX22222003"},"content":"            j -\u003d 1","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"CYX22222003"},"content":"        ","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"CYX22222003"},"content":"        if i \u003e\u003d j:","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"CYX22222003"},"content":"            break","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"CYX22222003"},"content":"        ","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"CYX22222003"},"content":"        temp \u003d xs[j]","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"CYX22222003"},"content":"        xs[j] \u003d xs[i]","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"CYX22222003"},"content":"        xs[i] \u003d temp","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"CYX22222003"},"content":"    temp \u003d xs[left]","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"CYX22222003"},"content":"    xs[left] \u003d xs[j]","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"CYX22222003"},"content":"    xs[j] \u003d temp","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"CYX22222003"},"content":"    return j","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false}],"authorContributionMap":{"CYX22222003":78}},{"path":"app/exception/Exceptions.py","fileType":"py","lines":[{"lineNumber":1,"author":{"gitId":"CYX22222003"},"content":"class InfoIncompleteException(Exception):","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"CYX22222003"},"content":"    def __init__(self, msg):","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"CYX22222003"},"content":"        super.__init__(msg)","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"CYX22222003"},"content":"        ","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false}],"authorContributionMap":{"CYX22222003":6}},{"path":"app/main.py","fileType":"py","lines":[{"lineNumber":1,"author":{"gitId":"Golddirio"},"content":"from telegram import Update, ReplyKeyboardMarkup, ReplyKeyboardRemove","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"Golddirio"},"content":"from telegram.ext import (","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"Golddirio"},"content":"    ApplicationBuilder,","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"Golddirio"},"content":"    ContextTypes,","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"Golddirio"},"content":"    CommandHandler,","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"Golddirio"},"content":"    MessageHandler,","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"Golddirio"},"content":"    filters,    ","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"Golddirio"},"content":"    ConversationHandler,","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"Golddirio"},"content":")","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"CYX22222003"},"content":"from app.algorithm.Pair import Pair","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"CYX22222003"},"content":"from app.algorithm.utils import convert_distances, perform_pca, quick_select","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"Golddirio"},"content":"from app.model.user import User, Base","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"Golddirio"},"content":"from sqlalchemy import create_engine, select, delete","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"Golddirio"},"content":"from sqlalchemy.orm import Session","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"Golddirio"},"content":"import os ","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"Golddirio"},"content":"from dotenv import load_dotenv","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"Golddirio"},"content":"from app.utils.utils import format_handle_list","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"Golddirio"},"content":"ASKING_GENDER, GENDER, ASKING_AGE, AGE, STARTING_QUIZ, QUIZ, MATCH \u003d range(7)","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"Golddirio"},"content":"load_dotenv()","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"Golddirio"},"content":"#Basic setup and database ","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"Golddirio"},"content":"Token \u003d os.getenv(\u0027TOKEN\u0027)","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"Golddirio"},"content":"print(Token)","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"Golddirio"},"content":"engine \u003d create_engine(\"sqlite:///data.db\", echo\u003dTrue)","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"Golddirio"},"content":"Base.metadata.create_all(engine)","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"Golddirio"},"content":"async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -\u003e int:","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"Golddirio"},"content":"    with Session(engine) as session:","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"Golddirio"},"content":"        user \u003d User(update.effective_user.username)","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"Golddirio"},"content":"        if session.query(User).filter(User.telegram_handle \u003d\u003d user.telegram_handle).count() \u003d\u003d 0:","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"Golddirio"},"content":"            session.add(user)","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"Golddirio"},"content":"            session.commit()","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"Golddirio"},"content":"            await context.bot.send_message(","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"Golddirio"},"content":"                chat_id\u003dupdate.effective_chat.id,","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"Golddirio"},"content":"                text\u003df\"Hi {update.effective_user.first_name} {update.effective_user.last_name} I\u0027m Cupid carrying arrows of love. I will help you find the best matches. To begin, use /gender to choose your gender.\",","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"Golddirio"},"content":"            )","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"Golddirio"},"content":"        else:","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"Golddirio"},"content":"            await context.bot.send_message(","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"Golddirio"},"content":"                chat_id\u003dupdate.effective_chat.id,","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"Golddirio"},"content":"                text\u003df\"Hi {update.effective_user.first_name} {update.effective_user.last_name} has been memorisied by me already. Just wait for others to text you or you can be forgotten by me using /deleteme!\",","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"Golddirio"},"content":"            )","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"Golddirio"},"content":"    return ASKING_GENDER","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"Golddirio"},"content":"# conversational bot","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"Golddirio"},"content":"async def asking_gender(update: Update, context: ContextTypes.DEFAULT_TYPE) -\u003e int:","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"Golddirio"},"content":"    \"\"\"Starts the conversation and asks the user about their gender.\"\"\"","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"Golddirio"},"content":"    reply_keyboard \u003d [[\"Boy\", \"Girl\", \"Other\"]]","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"Golddirio"},"content":"    await update.message.reply_text(","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"Golddirio"},"content":"        \"Hi! I am Cupid.\"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"Golddirio"},"content":"        \"Send /cancel to stop talking to me.\\n\\n\"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"Golddirio"},"content":"        \"Are you a boy or a girl?\",","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"Golddirio"},"content":"        reply_markup\u003dReplyKeyboardMarkup(","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"Golddirio"},"content":"            reply_keyboard,","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"Golddirio"},"content":"            one_time_keyboard\u003dTrue,","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"Golddirio"},"content":"            input_field_placeholder\u003d\"Boy or Girl?\",","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"Golddirio"},"content":"        ),","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"Golddirio"},"content":"    )","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"Golddirio"},"content":"    return GENDER","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"Golddirio"},"content":"async def cancel(update, context):","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"Golddirio"},"content":"    await update.message.reply_text(","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"Golddirio"},"content":"        \"Bye! I hope we can talk again some day.\", reply_markup\u003dReplyKeyboardRemove()","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"Golddirio"},"content":"    )","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"Golddirio"},"content":"    return ConversationHandler.END","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"Golddirio"},"content":"async def gender(update: Update, context: ContextTypes.DEFAULT_TYPE) -\u003e int:","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"Golddirio"},"content":"    \"\"\"Stores the selected gender and asks for a photo.\"\"\"","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"Golddirio"},"content":"    user \u003d update.message.from_user","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"Golddirio"},"content":"    input \u003d update.message.text","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"Golddirio"},"content":"    if input \u003d\u003d \"Girl\":","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"Golddirio"},"content":"        input_gender \u003d 0","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"Golddirio"},"content":"    elif input \u003d\u003d \"Boy\":","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"Golddirio"},"content":"        input_gender \u003d 1","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"Golddirio"},"content":"    else:","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"Golddirio"},"content":"        input_gender \u003d -1","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"Golddirio"},"content":"    ","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"Golddirio"},"content":"    with Session(engine) as session:","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"Golddirio"},"content":"        stmt \u003d select(User).where(User.telegram_handle \u003d\u003d user.username)","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"Golddirio"},"content":"        target \u003d session.scalars(stmt).one()","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"Golddirio"},"content":"        target.set_gender(input_gender)","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"Golddirio"},"content":"        session.commit()","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"Golddirio"},"content":"        ","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"Golddirio"},"content":"    await update.message.reply_text(","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"Golddirio"},"content":"        f\"I see! So {user.first_name} {user.last_name} is a {input}. Now you can tell me your age using /age. \",","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"Golddirio"},"content":"        reply_markup\u003dReplyKeyboardRemove(),","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"Golddirio"},"content":"    )","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"Golddirio"},"content":"    return ASKING_AGE","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"Golddirio"},"content":"async def asking_age(update: Update, context: ContextTypes.DEFAULT_TYPE) -\u003e int:","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"Golddirio"},"content":"    \"\"\"Asks the user about their age.\"\"\"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"Golddirio"},"content":"    await update.message.reply_text(","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"Golddirio"},"content":"        \"Hi! Cupid again.\"","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"Golddirio"},"content":"        \"Send /cancel to stop talking to me.\\n\\n\"","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"Golddirio"},"content":"        \"What is your age?\",","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"Golddirio"},"content":"        reply_markup\u003dReplyKeyboardRemove()","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"Golddirio"},"content":"    )","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"Golddirio"},"content":"    return AGE","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"Golddirio"},"content":"async def age(update: Update, context: ContextTypes.DEFAULT_TYPE) -\u003e int:","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"Golddirio"},"content":"    user_input \u003d update.message.text","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"Golddirio"},"content":"    user \u003d update.message.from_user","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"Golddirio"},"content":"    if user_input.isdigit():","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"Golddirio"},"content":"        age \u003d int(user_input)","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"Golddirio"},"content":"        with Session(engine) as session:","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"Golddirio"},"content":"            stmt \u003d select(User).where(User.telegram_handle \u003d\u003d user.username)","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"Golddirio"},"content":"            target \u003d session.scalars(stmt).one()","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"Golddirio"},"content":"            target.set_age(age)","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"Golddirio"},"content":"            session.commit()","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"Golddirio"},"content":"        await update.message.reply_text(f\"Thanks! I have recorded your age as {age}. Next you can take the quiz using /quiz. If you want to roll back your answer, using /age again.\")","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"Golddirio"},"content":"        return STARTING_QUIZ","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"Golddirio"},"content":"    else: ","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"Golddirio"},"content":"        await update.message.reply_text(\"Please enter a valid number.\")","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"Golddirio"},"content":"        return AGE","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"Golddirio"},"content":"    ","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"Golddirio"},"content":"async def starting_quiz(update: Update, context: ContextTypes.DEFAULT_TYPE) -\u003e int:","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"Golddirio"},"content":"    reply_keyboard \u003d [[\"1\", \"2\", \"3\", \"4\", \"5\"]]","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"Golddirio"},"content":"    context.user_data[\"answers\"] \u003d []","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"Golddirio"},"content":"    context.user_data[\"curr_question\"] \u003d 0","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"Golddirio"},"content":"    context.user_data[\"questions\"] \u003d [","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"Golddirio"},"content":"        \"How important is physical attraction to you in a relationship?\",","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"Golddirio"},"content":"        \"I prefer a partner who shares my hobbies and interests and similar values and beliefs(e.g. religious)\",","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"Golddirio"},"content":"        \"How much do you value deep, meaningful conversations with your partner?\",","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"Golddirio"},"content":"        \"How important is it for your partner to share your long-term goals?\",","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"Golddirio"},"content":"        \"I enjoy being physically active and doing outdoor activities.\",","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"Golddirio"},"content":"        \"I feel comfortable discussing my emotions and feelings with a partner.\",","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"Golddirio"},"content":"        \"I prefer having a structured and organized lifestyle.\",","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"Golddirio"},"content":"        \"How often do you prioritize alone time for yourself?\"","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"Golddirio"},"content":"    ]","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"Golddirio"},"content":"    await update.message.reply_text(","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"Golddirio"},"content":"        \"Now you can answer a series of questions to let me help you find the best matches \\n\\n\"","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"Golddirio"},"content":"        \"1 \u003d Least Extent, 5 \u003d Most Extent\\n\\n\"","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"Golddirio"},"content":"        f\"Question 1: {context.user_data[\"questions\"][0]} \\n\\n\",","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"Golddirio"},"content":"        reply_markup\u003dReplyKeyboardMarkup(","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"Golddirio"},"content":"            reply_keyboard,","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"Golddirio"},"content":"            one_time_keyboard\u003dTrue,","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"Golddirio"},"content":"            input_field_placeholder\u003d\"Choose a number between 1 and 5.\"","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"Golddirio"},"content":"        )","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"Golddirio"},"content":"    )","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"Golddirio"},"content":"    return QUIZ","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"Golddirio"},"content":"async def quiz(update: Update, context: ContextTypes.DEFAULT_TYPE) -\u003e int: ","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"Golddirio"},"content":"    user \u003d update.message.from_user","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"Golddirio"},"content":"    reply_keyboard \u003d [[\"1\", \"2\", \"3\", \"4\", \"5\"]]","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"Golddirio"},"content":"    curr_ans \u003d int(update.message.text)","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"Golddirio"},"content":"    context.user_data[\"answers\"].append(curr_ans)","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"Golddirio"},"content":"    context.user_data[\"curr_question\"] +\u003d1","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"Golddirio"},"content":"    curr_question \u003d context.user_data[\"curr_question\"]","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"Golddirio"},"content":"    ","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"Golddirio"},"content":"    if context.user_data[\"curr_question\"] \u003c len(context.user_data[\"questions\"]):","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"Golddirio"},"content":"        curr_question_task \u003d context.user_data[\"questions\"][curr_question]","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"Golddirio"},"content":"        await update.message.reply_text(","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"Golddirio"},"content":"            f\"Question {curr_question + 1}: {curr_question_task} \\n\\n\",","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"Golddirio"},"content":"            reply_markup\u003dReplyKeyboardMarkup(","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"Golddirio"},"content":"                reply_keyboard,","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"Golddirio"},"content":"                one_time_keyboard\u003dTrue,","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"Golddirio"},"content":"                input_field_placeholder\u003d\"Choose a number between 1 and 5.\"","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"Golddirio"},"content":"            )","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"Golddirio"},"content":"        )","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"Golddirio"},"content":"        return QUIZ","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"Golddirio"},"content":"    else:","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"Golddirio"},"content":"        answers \u003d context.user_data[\"answers\"]","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"Golddirio"},"content":"        with Session(engine) as session:","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"Golddirio"},"content":"            stmt \u003d select(User).where(User.telegram_handle \u003d\u003d user.username)","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"Golddirio"},"content":"            target \u003d session.scalars(stmt).one() # execute the stmt n return the user","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"Golddirio"},"content":"            target.set_score(answers)","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"Golddirio"},"content":"            session.commit()","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"Golddirio"},"content":"        await update.message.reply_text(","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"Golddirio"},"content":"            \"Thank you for completing the quiz. Cupid will help you match if you input /match\",","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"Golddirio"},"content":"            reply_markup\u003dReplyKeyboardRemove()","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"Golddirio"},"content":"        )","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"Golddirio"},"content":"        context.user_data.clear()","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"Golddirio"},"content":"        return MATCH","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"Golddirio"},"content":"    ","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"Golddirio"},"content":"async def match(update: Update, context: ContextTypes.DEFAULT_TYPE) -\u003e int:","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"Golddirio"},"content":"    user \u003d update.message.from_user","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"Golddirio"},"content":"    # user object","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"Golddirio"},"content":"    with Session(engine) as session:","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"Golddirio"},"content":"        stmt \u003d select(User).where(User.telegram_handle \u003d\u003d user.username)","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"Golddirio"},"content":"        target \u003d session.scalars(stmt).one()","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"CYX22222003"},"content":"        session.commit()","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"Golddirio"},"content":"        ","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"Golddirio"},"content":"        date_gender \u003d target.gender ^ 1","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"Golddirio"},"content":"        stmt \u003d select(User).where(User.gender \u003d\u003d date_gender)","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"CYX22222003"},"content":"        opp_gender_users_tmp \u003d session.scalars(stmt).all()","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"CYX22222003"},"content":"        session.commit()","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"CYX22222003"},"content":"        # Extract vector of score including age","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"CYX22222003"},"content":"        target_xs \u003d [Pair(target.id, target.vectorize_scores())]","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"Golddirio"},"content":"    ","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"CYX22222003"},"content":"        for u in opp_gender_users_tmp:","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"CYX22222003"},"content":"            p \u003d Pair(u.id, u.vectorize_scores())","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"CYX22222003"},"content":"            target_xs.append(p)","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"CYX22222003"},"content":"        ","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"CYX22222003"},"content":"        reduced_target_xs \u003d perform_pca(target_xs)","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"CYX22222003"},"content":"        distance_xs \u003d convert_distances(reduced_target_xs)","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"CYX22222003"},"content":"        top_3 \u003d quick_select(distance_xs, 3)","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"Golddirio"},"content":"        final_list \u003d []","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"Golddirio"},"content":"        for each in top_3:","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"Golddirio"},"content":"            with Session(engine) as session:","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"Golddirio"},"content":"                stmt \u003d select(User).where(User.id \u003d\u003d each[0])","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"Golddirio"},"content":"                curr_user \u003d session.scalars(stmt).one()","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"Golddirio"},"content":"                session.commit()","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"Golddirio"},"content":"                final_list.append(curr_user.telegram_handle)","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"Golddirio"},"content":"    await update.message.reply_text(","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"Golddirio"},"content":"        \"I have helped you find out the top 3 fittest dates for you. Their telegram handles are:\\n\"","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"Golddirio"},"content":"        f\"{format_handle_list(final_list)}\\n\"","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"Golddirio"},"content":"        \"Please feel free to strike a conversation and begin with a hello.\",","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"Golddirio"},"content":"        reply_markup\u003dReplyKeyboardRemove()","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"Golddirio"},"content":"    )","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"Golddirio"},"content":"    return ConversationHandler.END","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"Golddirio"},"content":"async def delete(update: Update, context: ContextTypes.DEFAULT_TYPE) -\u003e int: ","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"Golddirio"},"content":"    user \u003d update.message.from_user","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"Golddirio"},"content":"    with Session(engine) as session:","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"Golddirio"},"content":"        stmt \u003d select(User).where(User.telegram_handle \u003d\u003d user.username)","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"Golddirio"},"content":"        target \u003d session.scalars(stmt).one_or_none()","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"Golddirio"},"content":"    ","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"Golddirio"},"content":"        if target:","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"Golddirio"},"content":"            session.delete(target)","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"Golddirio"},"content":"            session.commit()","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"Golddirio"},"content":"            await update.message.reply_text(","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"Golddirio"},"content":"                \"I have erased all the memories about you. See you next time. If you want to start again, using /start.\",","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"Golddirio"},"content":"                reply_markup\u003dReplyKeyboardRemove()","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"Golddirio"},"content":"            ) ","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"Golddirio"},"content":"        else:","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"Golddirio"},"content":"            await update.message.reply_text(","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"Golddirio"},"content":"                \"I have never chatted with you before. No memories about you can be erased from me. You can start the conversation with me using /start.\",","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"Golddirio"},"content":"                reply_markup\u003dReplyKeyboardRemove()","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"Golddirio"},"content":"            )","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"Golddirio"},"content":"    return ConversationHandler.END","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"Golddirio"},"content":"            ","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"Golddirio"},"content":"    ","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"Golddirio"},"content":"async def help(update, context):","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"Golddirio"},"content":"    user \u003d update.message.from_user","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"Golddirio"},"content":"    await update.message.reply_text(","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"Golddirio"},"content":"        \"I am Cupid who can help you match with the top fits of possible dates after you tell us your gender, age and finishing 8 quizes.\",","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"Golddirio"},"content":"        ","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"Golddirio"},"content":"    )","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"Golddirio"},"content":"    return ConversationHandler.END","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"Golddirio"},"content":"def main():","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"Golddirio"},"content":"    application \u003d ApplicationBuilder().token(Token).build()","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"Golddirio"},"content":"    application.add_handler(CommandHandler(\"help\", help))","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"Golddirio"},"content":"    conv_handler \u003d ConversationHandler(","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"Golddirio"},"content":"        entry_points\u003d[CommandHandler(\"start\", start)],","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"Golddirio"},"content":"        states\u003d{","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"Golddirio"},"content":"            ASKING_GENDER: [CommandHandler(\"gender\", asking_gender)],","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"Golddirio"},"content":"            GENDER: [MessageHandler(filters.Regex(\"^(Boy|Girl|Other)\"), gender)],","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"Golddirio"},"content":"            ASKING_AGE: [CommandHandler(\"age\", asking_age)],","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"Golddirio"},"content":"            AGE: [MessageHandler(filters.TEXT, age)],","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"Golddirio"},"content":"            STARTING_QUIZ: [CommandHandler(\"quiz\", starting_quiz), CommandHandler(\"age\", asking_age)],","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"Golddirio"},"content":"            QUIZ: [MessageHandler(filters.Regex(r\u0027^[1-5]$\u0027), quiz)],","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"Golddirio"},"content":"            MATCH: [CommandHandler(\"match\", match)]","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"Golddirio"},"content":"        },","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"Golddirio"},"content":"        fallbacks\u003d[CommandHandler(\"cancel\", cancel), CommandHandler(\"deleteme\", delete)]","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"Golddirio"},"content":"    )","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"Golddirio"},"content":"    application.add_handler(conv_handler)","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"Golddirio"},"content":"    application.add_handler(CommandHandler(\"deleteme\", delete))","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"Golddirio"},"content":"    application.run_polling()","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"Golddirio"},"content":"if __name__ \u003d\u003d \"__main__\":","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"Golddirio"},"content":"    main()","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"Golddirio"},"content":"   ","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false}],"authorContributionMap":{"Golddirio":279,"CYX22222003":15}},{"path":"app/mock/mock.py","fileType":"py","lines":[{"lineNumber":1,"author":{"gitId":"CYX22222003"},"content":"import random","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"CYX22222003"},"content":"from app.model.user import User","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"CYX22222003"},"content":"from app.main import engine","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"CYX22222003"},"content":"from app.model.user import User","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"CYX22222003"},"content":"from sqlalchemy.orm import Session","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"CYX22222003"},"content":"def generate_mock():","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"CYX22222003"},"content":"    for i in range(10):","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"CYX22222003"},"content":"        usr \u003d User(f\"testA{i}\")","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"CYX22222003"},"content":"        usr.set_age(random.randint(18, 25))","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"CYX22222003"},"content":"        usr.set_gender(random.randint(0, 1))","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"CYX22222003"},"content":"        scores \u003d []","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"CYX22222003"},"content":"        for i in range(8):","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"CYX22222003"},"content":"            scores.append(random.randint(1, 5))","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"CYX22222003"},"content":"            ","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"CYX22222003"},"content":"        usr.set_score(scores)","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"CYX22222003"},"content":"        ","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"CYX22222003"},"content":"        with Session(engine) as session:","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"CYX22222003"},"content":"            session.add(usr)","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"CYX22222003"},"content":"            session.commit()","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"CYX22222003"},"content":"            ","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"CYX22222003"},"content":"if __name__ \u003d\u003d \"__main__\":","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"CYX22222003"},"content":"    generate_mock()","isFullCredit":false}],"authorContributionMap":{"CYX22222003":23}},{"path":"app/model/user.py","fileType":"py","lines":[{"lineNumber":1,"author":{"gitId":"CYX22222003"},"content":"from sqlalchemy.orm import DeclarativeBase","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"CYX22222003"},"content":"from sqlalchemy.orm import Mapped","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"CYX22222003"},"content":"from sqlalchemy.orm import mapped_column","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"CYX22222003"},"content":"import json","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"CYX22222003"},"content":"import numpy as np","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"CYX22222003"},"content":"class Base(DeclarativeBase):","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"CYX22222003"},"content":"    pass","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"CYX22222003"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"CYX22222003"},"content":"class User(Base):","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"CYX22222003"},"content":"    __tablename__ \u003d \"user\"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"CYX22222003"},"content":"    id: Mapped[int] \u003d mapped_column(primary_key\u003dTrue, autoincrement\u003dTrue)","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"CYX22222003"},"content":"    telegram_handle: Mapped[str] \u003d mapped_column(nullable\u003dFalse)","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"CYX22222003"},"content":"    gender: Mapped[int]","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"CYX22222003"},"content":"    age: Mapped[int]","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"CYX22222003"},"content":"    scores: Mapped[str] \u003d mapped_column(nullable\u003dFalse)","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"CYX22222003"},"content":"    def __init__(self, telegram_handle):","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"CYX22222003"},"content":"        self.telegram_handle \u003d telegram_handle","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"CYX22222003"},"content":"        data \u003d {\"scores\": [0 for i in range(8)]}","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"CYX22222003"},"content":"        obj \u003d json.dumps(data)","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"CYX22222003"},"content":"        self.scores \u003d obj","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"CYX22222003"},"content":"        self.age \u003d -1","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"CYX22222003"},"content":"        self.gender \u003d -1","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"CYX22222003"},"content":"    def set_age(self, age):","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"CYX22222003"},"content":"        self.age \u003d age","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"CYX22222003"},"content":"    def set_gender(self, gender):","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"CYX22222003"},"content":"        self.gender \u003d gender","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"Golddirio"},"content":"    def set_score(self, scs):","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"Golddirio"},"content":"        obj \u003d json.loads(self.scores) #dict in json must have key ","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"CYX22222003"},"content":"        for s in range(len(scs)):","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"CYX22222003"},"content":"            obj[\"scores\"][s] \u003d scs[s]","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"Golddirio"},"content":"        self.scores \u003d json.dumps(obj) #string ","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"CYX22222003"},"content":"     ","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"CYX22222003"},"content":"    def vectorize_scores(self):","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"CYX22222003"},"content":"        tmp \u003d json.loads(self.scores)[\"scores\"]","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"CYX22222003"},"content":"        tmp.append(self.age)","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"CYX22222003"},"content":"        return np.array(tmp)","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"CYX22222003"},"content":"    def has_complete_score(self):","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"CYX22222003"},"content":"        scores \u003d json.loads(self.scores)[\"scores\"]","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"CYX22222003"},"content":"        return not(0 in scores)","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"CYX22222003"},"content":"    def has_complete_age(self):","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"CYX22222003"},"content":"        return self.age !\u003d -1","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"CYX22222003"},"content":"    def has_complete_gender(self):","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"CYX22222003"},"content":"        return self.gender !\u003d -1","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"CYX22222003"},"content":"    ","isFullCredit":false}],"authorContributionMap":{"Golddirio":3,"CYX22222003":51}},{"path":"app/utils/utils.py","fileType":"py","lines":[{"lineNumber":1,"author":{"gitId":"Golddirio"},"content":"def format_handle_list(handles):","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"Golddirio"},"content":"    out \u003d []","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"Golddirio"},"content":"    for handle in handles:","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"Golddirio"},"content":"        out.append(f\"@{handle}\")","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"Golddirio"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"Golddirio"},"content":"    return \"\\n\".join(out) ","isFullCredit":false}],"authorContributionMap":{"Golddirio":6}},{"path":"requirement.txt","fileType":"txt","lines":[{"lineNumber":1,"author":{"gitId":"Golddirio"},"content":"anyio\u003d\u003d4.8.0","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"Golddirio"},"content":"certifi\u003d\u003d2024.12.14","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"Golddirio"},"content":"greenlet\u003d\u003d3.1.1","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"Golddirio"},"content":"h11\u003d\u003d0.14.0","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"Golddirio"},"content":"httpcore\u003d\u003d1.0.7","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"Golddirio"},"content":"httpx\u003d\u003d0.28.1","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"Golddirio"},"content":"idna\u003d\u003d3.10","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"Golddirio"},"content":"joblib\u003d\u003d1.4.2","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"Golddirio"},"content":"numpy\u003d\u003d2.2.1","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"Golddirio"},"content":"python-dotenv\u003d\u003d1.0.1","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"Golddirio"},"content":"python-telegram-bot\u003d\u003d21.10","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"Golddirio"},"content":"scikit-learn\u003d\u003d1.6.1","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"Golddirio"},"content":"scipy\u003d\u003d1.15.1","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"Golddirio"},"content":"sniffio\u003d\u003d1.3.1","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"Golddirio"},"content":"SQLAlchemy\u003d\u003d2.0.37","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"Golddirio"},"content":"threadpoolctl\u003d\u003d3.5.0","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"Golddirio"},"content":"typing_extensions\u003d\u003d4.12.2","isFullCredit":false}],"authorContributionMap":{"Golddirio":17}}]
